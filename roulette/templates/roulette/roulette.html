{% extends 'base.html' %}
{% block content %}
<div class="column">
    <h2>Ruleta</h2>
    <div class="ruleta-box">
        {% if selected %}
            {% if selected.image %}
                <img src="{{ selected.image.url }}" alt="{{ selected.name }}" width="80" height="80"><br>
            {% else %}
                <div class="selected-initial">{{ selected.initial }}</div>
            {% endif %}
            <div class="selected">{{ selected.name }}</div>
        {% else %}
            <div class="no-seleccionado">No hay seleccionado</div>
        {% endif %}
    </div>
    <div id="timer">{% if selected %}60{% endif %}</div>
    <form method="post">
        {% csrf_token %}
        <button type="submit" id="random-btn">Random</button>
    </form>
</div>
{% if selected %}
<script>
function startTimer() {
    let counter = 60;
    const timerEl = document.getElementById('timer');
    timerEl.textContent = counter;
    timerEl.classList.remove('red'); // Reset color

    const interval = setInterval(() => {
        counter--;
        timerEl.textContent = counter;
        if (counter === 10) {
            timerEl.classList.add('red');
        }
        if (counter <= 0) {
            clearInterval(interval);
        }
    }, 1000);
}
window.onload = startTimer;
</script>
{% endif %}
{% endblock %}